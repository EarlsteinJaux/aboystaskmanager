<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Manager</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
    <h1>Task Manager By Aboy The GREAT!!!!!!ðŸ˜‰</h1>

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
      New task
    </button>

    <!-- Modal Template -->
    <form
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
      onsubmit="addTask(event)"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">New Task</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="name" class="form-label">Name</label>
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                required
              />
            </div>
            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="completed"
                name="completed"
              />
              <label class="form-check-label" for="completed">Mark as completed</label>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >Close</button>
            <button type="submit" class="btn btn-primary">Create</button>
          </div>
        </div>
      </div>
    </form>

    <!-- Task Tables -->
    <div class="mt-4">
      <h2>Work Tasks</h2>
      <table class="table" id="workTaskTable">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="mt-4">
      <h2>Personal Tasks</h2>
      <table class="table" id="personalTaskTable">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="mt-4">
      <h2>Shopping Tasks</h2>
      <table class="table" id="shoppingTaskTable">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="mt-4">
      <h2>Other Tasks</h2>
      <table class="table" id="otherTaskTable">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Bootstrap JS and Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
  <script>
    let tasks = {
      work: [],
      personal: [],
      shopping: [],
      other: []
    };
    let taskId = 1;

    function addTask(event) {
      event.preventDefault();
      
      const name = document.getElementById('name').value;
      const completed = document.getElementById('completed').checked;
      const taskCategory = prompt("Enter task category (work, personal, shopping, other)").toLowerCase();

      if (!tasks[taskCategory]) {
        alert('Invalid category. Please enter one of: work, personal, shopping, other.');
        return;
      }

      const newTask = { id: taskId++, name, completed };
      tasks[taskCategory].push(newTask);
      renderTasks();
      
      // Close modal and clear form
      document.getElementById('name').value = '';
      document.getElementById('completed').checked = false;
      const modal = new bootstrap.Modal(document.getElementById('exampleModal'));
      modal.hide();
    }

    function toggleComplete(taskId, category) {
      const task = tasks[category].find(t => t.id === taskId);
      if (task) {
        task.completed = !task.completed;
        renderTasks();
      }
    }

    function removeTask(taskId, category) {
      tasks[category] = tasks[category].filter(t => t.id !== taskId);
      renderTasks();
    }

    function renderTasks() {
      const categories = ['work', 'personal', 'shopping', 'other'];
      categories.forEach(category => {
        const tbody = document.querySelector(`#${category}TaskTable tbody`);
        tbody.innerHTML = ''; // Clear the table

        tasks[category].forEach(task => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <th scope="row">${task.id}</th>
            <td>${task.name}</td>
            <td>${task.completed ? 'Completed' : 'Not Completed'}</td>
            <td>
              <div class="dropdown">
                <div class="dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  &#x2802;&#x2802;&#x2802;
                </div>
                <ul class="dropdown-menu">
                  <li><button type="button" class="dropdown-item" onclick="toggleComplete(${task.id}, '${category}')">
                    Mark as ${task.completed ? 'Not Completed' : 'Completed'}
                  </button></li>
                  <li><button type="button" class="dropdown-item" onclick="removeTask(${task.id}, '${category}')">
                    Delete
                  </button></li>
                </ul>
              </div>
            </td>
          `;
          tbody.appendChild(row);
        });
      });
    }
  </script>
</body>
</html>
